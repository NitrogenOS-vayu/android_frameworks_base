From 0f5f6842a18006c15386c2254cd694061145fc0c Mon Sep 17 00:00:00 2001
From: xyyx <xyyx@mail.ru>
Date: Tue, 11 Sep 2018 17:04:31 +0800
Subject: [PATCH] BatteryStatsImpl.java: Stop resetting battery stats after
 reboot with battery level >= 90

Change-Id: I77d3426c1af4abef05ed924c0859a9d71d1c77ec
Signed-off-by: Pranav Vashi <neobuddy89@gmail.com>
---
 core/java/com/android/internal/os/BatteryStatsImpl.java | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/core/java/com/android/internal/os/BatteryStatsImpl.java b/core/java/com/android/internal/os/BatteryStatsImpl.java
index 5a1af84eccac..8afdf162b713 100644
--- a/core/java/com/android/internal/os/BatteryStatsImpl.java
+++ b/core/java/com/android/internal/os/BatteryStatsImpl.java
@@ -12080,7 +12080,7 @@ protected void setOnBatteryLocked(final long mSecRealtime, final long mSecUptime
             // level to a now very high level).
             boolean reset = false;
             if (!mNoAutoReset && (oldStatus == BatteryManager.BATTERY_STATUS_FULL
-                    || level >= 90
+                    || level >= 99
                     || (mDischargeCurrentLevel < 20 && level >= 80))) {
                 Slog.i(TAG, "Resetting battery stats: level=" + level + " status=" + oldStatus
                         + " dischargeLevel=" + mDischargeCurrentLevel
